<div class="container-jaulas">

  <h2>Administración de Jaulas</h2>

  <!-- Buscador -->
  <div class="search-container">
    <input type="text" placeholder="Buscar jaula..." [(ngModel)]="filtroNombre" />
  </div>

  <!-- Formulario agregar jaula -->
  <div class="card add-card">
    <input type="text" placeholder="Nombre de la nueva jaula" [(ngModel)]="nuevaJaula.nombre" />
    <select [(ngModel)]="nuevaJaula.enUso">
      <option value="S">Sí</option>
      <option value="N">No</option>
    </select>
    <button (click)="agregar()">Agregar</button>
  </div>

  <!-- Tabla de jaulas -->
  <div class="table-responsive">
    <table class="styled-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>En Uso</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        @for (j of jaulasFiltradas; track j.idJaula) {
          <tr>
            <td>{{ j.idJaula }}</td>

            <!-- Nombre -->
            @if (editandoId !== j.idJaula) {
              <td>{{ j.nombre }}</td>
            } @else {
              <td><input [(ngModel)]="nombreEditado" /></td>
            }

            <!-- En Uso -->
            @if (editandoId !== j.idJaula) {
              <td>{{ j.enUso === 'S' ? 'Sí' : 'No' }}</td>
            } @else {
              <td>
                <select [(ngModel)]="enUsoEditado">
                  <option value="S">Sí</option>
                  <option value="N">No</option>
                </select>
              </td>
            }

            <!-- Acciones -->
            @if (editandoId !== j.idJaula) {
              <td>
                <button class="btn-edit" (click)="iniciarEdicion(j)">Editar</button>
                <button class="btn-delete" (click)="eliminar(j.idJaula)">Eliminar</button>
              </td>
            } @else {
              <td>
                <button class="btn-save" (click)="guardarEdicion(j.idJaula)">Guardar</button>
                <button class="btn-cancel" (click)="cancelarEdicion()">Cancelar</button>
              </td>
            }
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
